<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Tibbles</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Leeutjie</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    R4DS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="2_data_visualisation.html">Data Visualisation</a>
    </li>
    <li>
      <a href="3_data_transformation.html">Data Transformation</a>
    </li>
    <li>
      <a href="10_tibbles.html">Tibbles</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Tibbles</h1>

</div>


<div id="tibbles" class="section level1">
<h1>Tibbles</h1>
<p>AS stated earlier, <strong>tibbles</strong> are effectively data frames, but are modified versions to display better and have certain, more efficient, behaviours.</p>
<div id="creating-tibbles" class="section level3">
<h3>Creating Tibbles</h3>
<p>To coerce a <code>data frame</code> to a tibble:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.0.0     v purrr   0.2.5
## v tibble  1.4.2     v dplyr   0.7.6
## v tidyr   0.8.1     v stringr 1.3.1
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>as_tibble(iris)</code></pre>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
##  1          5.1         3.5          1.4         0.2 setosa 
##  2          4.9         3            1.4         0.2 setosa 
##  3          4.7         3.2          1.3         0.2 setosa 
##  4          4.6         3.1          1.5         0.2 setosa 
##  5          5           3.6          1.4         0.2 setosa 
##  6          5.4         3.9          1.7         0.4 setosa 
##  7          4.6         3.4          1.4         0.3 setosa 
##  8          5           3.4          1.5         0.2 setosa 
##  9          4.4         2.9          1.4         0.2 setosa 
## 10          4.9         3.1          1.5         0.1 setosa 
## # ... with 140 more rows</code></pre>
<p>To create a new tibble, use the following syntax:</p>
<pre class="r"><code>tibble(  
  x = 1:5, 
  y = 1, 
  z = x ^ 2 + y)</code></pre>
<pre><code>## # A tibble: 5 x 3
##       x     y     z
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     1     2
## 2     2     1     5
## 3     3     1    10
## 4     4     1    17
## 5     5     1    26</code></pre>
<p>Tibble columns can have non-syntactic names, for example:</p>
<pre class="r"><code>tb &lt;- tibble(
  `:)` = &quot;smile&quot;, 
  ` ` = &quot;space&quot;,
  `2000` = &quot;number&quot;)
tb</code></pre>
<pre><code>## # A tibble: 1 x 3
##   `:)`  ` `   `2000`
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 smile space number</code></pre>
<p>To revise, you can create/coerce a tibble with <code>as_tibble</code>, <code>tibble</code> and now also <code>tribble</code> â€” short for transposed tibble. The function is customised for data entry in code: column headings are defined by formulas (i.e. they start with <code>~</code>), and entries are separated by commas. You can literally layout the table you want, and <code>tribble</code> will coerce it for you. I often add a comment (the line starting with #), to make it really clear where the header is.</p>
<pre class="r"><code>tribble(
  ~x, ~y, ~z,
  #--|--|----
  &quot;a&quot;, 2, 3.6,
  &quot;b&quot;, 1, 8.5
)</code></pre>
<pre><code>## # A tibble: 2 x 3
##   x         y     z
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         2   3.6
## 2 b         1   8.5</code></pre>
</div>
<div id="tibble-vs-data.frame" class="section level3">
<h3>Tibble vs data.frame</h3>
<p>The two main differences between <code>data.frames</code> and <code>tibbles</code> are the way in which these objects print and how data can be subsetted within these structures.</p>
<div id="printing" class="section level4">
<h4>Printing</h4>
<p>As opposed to a dataframe, a tibble prints the first ten rows of the set, shows data types and also shows the name of the tibble. It also gives a row count which is really helpful when working with big data sets. Here is an example that incorporates dates from <code>lubridate</code>, a package we will get to later.</p>
<pre class="r"><code>tibble(                                        # Some extra comments
  a = lubridate::now() + runif(1e3) * 86400,   # lubrudate::now() gives a timestamp of right now; 1e3 for some reason calculates 1000
  b = lubridate::today() + runif(1e3) * 30,    # lubridate::today() gives today&#39;s date; runi() yields a uniform distribution based on an input parameter. 
  c = 1:1e3,
  d = runif(1e3),
  e = sample(letters, 1e3, replace = TRUE)     # letters yields a vector of lower case letters of the alphabet, sample() is a base function that samples rows from a vector
)</code></pre>
<pre><code>## # A tibble: 1,000 x 5
##    a                   b              c       d e    
##    &lt;dttm&gt;              &lt;date&gt;     &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;
##  1 2018-11-20 17:15:11 2018-12-07     1 0.469   p    
##  2 2018-11-20 19:33:40 2018-12-03     2 0.305   y    
##  3 2018-11-20 17:31:52 2018-12-08     3 0.959   u    
##  4 2018-11-20 18:26:48 2018-12-10     4 0.0589  d    
##  5 2018-11-21 08:45:25 2018-11-22     5 0.128   e    
##  6 2018-11-21 01:53:26 2018-12-16     6 0.00131 i    
##  7 2018-11-20 12:59:51 2018-12-03     7 0.387   g    
##  8 2018-11-21 07:44:10 2018-11-20     8 0.276   s    
##  9 2018-11-20 22:55:31 2018-11-27     9 0.0848  g    
## 10 2018-11-21 04:51:47 2018-12-16    10 0.303   c    
## # ... with 990 more rows</code></pre>
<p>By design, tibbles print succinctly so as not to overwhelm your console. Often, though, we need to see more than the six rows of data the default print gives us. Here are a few options for overriding the default printing parameters:</p>
<ol style="list-style-type: decimal">
<li>You can <code>print()</code> the data frame and control the number of rows <code>(n)</code> and <code>width</code> of the display. <code>width = Inf</code>, for instance, will display all the columns:</li>
</ol>
<pre class="r"><code>nycflights13::flights %&gt;% 
  print(n = 10, width = Inf) # Inf is short for infinite</code></pre>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
##    sched_arr_time arr_delay carrier flight tailnum origin dest  air_time
##             &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;
##  1            819        11 UA        1545 N14228  EWR    IAH        227
##  2            830        20 UA        1714 N24211  LGA    IAH        227
##  3            850        33 AA        1141 N619AA  JFK    MIA        160
##  4           1022       -18 B6         725 N804JB  JFK    BQN        183
##  5            837       -25 DL         461 N668DN  LGA    ATL        116
##  6            728        12 UA        1696 N39463  EWR    ORD        150
##  7            854        19 B6         507 N516JB  EWR    FLL        158
##  8            723       -14 EV        5708 N829AS  LGA    IAD         53
##  9            846        -8 B6          79 N593JB  JFK    MCO        140
## 10            745         8 AA         301 N3ALAA  LGA    ORD        138
##    distance  hour minute time_hour          
##       &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1     1400     5     15 2013-01-01 05:00:00
##  2     1416     5     29 2013-01-01 05:00:00
##  3     1089     5     40 2013-01-01 05:00:00
##  4     1576     5     45 2013-01-01 05:00:00
##  5      762     6      0 2013-01-01 06:00:00
##  6      719     5     58 2013-01-01 05:00:00
##  7     1065     6      0 2013-01-01 06:00:00
##  8      229     6      0 2013-01-01 06:00:00
##  9      944     6      0 2013-01-01 06:00:00
## 10      733     6      0 2013-01-01 06:00:00
## # ... with 3.368e+05 more rows</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>You can control the default print by setting options:
<ul>
<li><code>options(tibble.print_max = n, tibble.print_min = m)</code>: if more than m rows, print only n rows. Use <code>options(dplyr.print_min = Inf)</code> to always show all rows.</li>
<li>Use <code>options(tibble.width = Inf)</code> to always print all columns, regardless of the width of the screen.</li>
<li>You can see a complete list of options by looking at the package help with <code>package?tibble</code>.</li>
</ul></li>
<li>Another option I use often is the <code>View()</code> command, which generates a scrollable view of the complete dataset. This is often useful at the end of a long data manipulation.</li>
</ol>
</div>
<div id="subsetting" class="section level4">
<h4>Subsetting</h4>
<p>R works with the following subsetting tools:</p>
<ul>
<li><code>$</code> extracts by name only, but is easier to type</li>
<li><code>[[</code> extracts by name or position</li>
</ul>
<p>Here are some examples:</p>
<pre class="r"><code>df &lt;- tibble(
  x = runif(5),
  y = rnorm(5) # Creates a random normal distribution
)

# To extract by name:
df$x</code></pre>
<pre><code>## [1] 0.6146303 0.1252503 0.8088654 0.9783253 0.2487020</code></pre>
<pre class="r"><code># or
df[[&quot;x&quot;]]</code></pre>
<pre><code>## [1] 0.6146303 0.1252503 0.8088654 0.9783253 0.2487020</code></pre>
<pre class="r"><code># These operations also work in a pipe format:
df %&gt;% .$x  # The &#39;.&#39; simply refers to the output from the preceding function. </code></pre>
<pre><code>## [1] 0.6146303 0.1252503 0.8088654 0.9783253 0.2487020</code></pre>
<pre class="r"><code>df %&gt;% .[[&quot;x&quot;]]</code></pre>
<pre><code>## [1] 0.6146303 0.1252503 0.8088654 0.9783253 0.2487020</code></pre>
<p>Compared to a <code>data.frame</code>, tibbles are more strict: they never do partial matching, and they will generate a warning if the column you are trying to access does not exist.</p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
